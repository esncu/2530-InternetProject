<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="styles.css">
        <title>Impian - Shop Products</title>
        <style>
            .product-grid{
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 25px;
            }

            .product-card{
                background: #ffffff;
                border-radius: 24px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.05);
                padding: 25px;
                display: flex;
                flex-direction: column;
            }

            .product-info h3{
                margin: 0 0 5px 0;
                font-size: 16px;
                color: #1e293b;
                font-weight: 700;
            }

            .product-category{
                font-size: 14px; 
                color: gray; 
                margin-top: -5px; 
                margin-bottom: 10px;
                display: block;
            }

            .product-price{
                font-size: 14px;
                font-weight: 600;
                color: green; 
                margin-bottom: 20px;
                display: block;
            }

            .add-btn{
                flex: 1;
                padding: 12px 5px;
                background: #12151b;
                color: white;
                border: none;
                border-radius: 14px;
                font-weight: 700;
                font-size: 12px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }

            .add-btn:hover{
                opacity: 0.8;
            }

            .details-btn{
                flex: 1;
                padding: 12px 5px;
                color: white;
                border: none;
                border-radius: 14px;
                font-weight: 700;
                font-size: 12px;
                background: rgb(147, 0, 147);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }

             .details-btn:hover{
                opacity: 0.8;
            }

            .view-cart-float{
                position: fixed;
                top: 100px;
                right: 30px;
                color: white;
                padding: 15px 25px;
                border-radius: 50px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
                font-size: 14px;
                background-color: rgb(48, 48, 48);
                font-weight: 600;
                text-decoration: none;
                z-index: 1000;
            }

            .button-group{
                display: flex;
                gap: 10px;
                margin-top: auto;
            }

            .product-image{
                width: 100%;
                height: 180px;
                object-fit: cover;
                margin-bottom: 15px;
                background-color: #f1f5f9;
                border-radius: 12px;
            }
        </style>
    </head>
    <body>
        <header id='topbar'>  
            <p>Flash Sale: Up to 50% Off ‚Äî Shop Now!   |   Free Shipping on Orders Above RM100   |   Weekend Special: Extra 15% Off Storewide Flash Sale: Up to 50% Off ‚Äî Shop Now!   |   Free Shipping on Orders Above RM100   |   Weekend Special: Extra 15% Off Storewide Flash Sale: Up to 50% Off ‚Äî Shop Now!</p> 
        </header>

        <aside id='sidebar'>
            <a id="logo" href="index.html">
                <img src="./media/logo.webp" alt="Logo" style="width: 120px;">
            </a>
            
            <a href="customer-dashboard.html"><span>üè†</span>Dashboard</a>
            <a href="shop.html" class="active-link"><span>üõçÔ∏è</span>Start Shopping</a>
            <a href="cart.html"><span>üõí</span>Your Cart</a>
            <a href="comments.html"><span>üí¨</span>Comments</a>
            <a href="services.html"><span>‚öôÔ∏è</span>Our Services</a>
            <a href="about.html"><span>‚ÑπÔ∏è</span>About Us</a>
            <a href="contact.html"><span>üìû</span>Contact Us</a>
            
            <a href="admin-login.html" class="logout-btn">Logout</a>
        </aside>

        <div id='main-content'>
            <div>
                <h1 style="color: #333; margin-bottom: 5px; text-align: center;">Our Featured Products</h1>
                <p style="color: #666; margin-bottom: 30px; font-size: 14px; text-align: center;">Quality items curated just for you.</p>
            </div>

            <a href="cart.html" class="view-cart-float">üõí View Cart</a>
            <div class="product-grid" id="product-display"></div>
        </div>

        <script>
            const defaultProducts = [
                { id: 1, name: "Wireless Ergonomic Mouse X70II ‚Äì Precision Control Edition", price: 25, category: "Accessories", image: "media/mouse2.jpg" },
                { id: 2, name: "Mechanical Keyboard High-Performance Typing Experience", price: 75, category: "Accessories", image: "media/keyboard1.avif" },
                { id: 3, name: "Gaming Headset ‚Äì Immersive Surround Sound Pro Series", price: 120, category: "Audio", image: "media/headset1.webp" },
                { id: 4, name: "Wireless Mouse ‚Äì Sleek Design Comfort Grip", price: 25, category: "Accessories", image: "media/mouse1.webp" },
                { id: 5, name: "Mechanical Keyboard ‚Äì Durable Switch Technology", price: 75, category: "Accessories", image: "media/keyboard2.jpg" },
                { id: 6, name: "Gaming Headset ‚Äì Noise-Cancelling Audio Elite", price: 120, category: "Audio", image: "media/headset2.jpg" },
                { id: 7, name: "Wireless Mouse ‚Äì Compact Travel-Friendly Edition", price: 25, category: "Accessories", image: "media/mouse3.jpg" },
                { id: 8, name: "Mechanical Keyboard ‚Äì RGB Backlit Gaming Series", price: 75, category: "Accessories", image: "media/keyboard3.avif" },
                { id: 9, name: "Gaming Headset ‚Äì Studio-Quality Microphone & Sound", price: 120, category: "Audio", image: "media/headset3.jpg" }
            ];

            function displayProducts(){
                const display = document.getElementById('product-display');
                const storedProducts = JSON.parse(localStorage.getItem('allProducts')) || defaultProducts;

                display.innerHTML = ''; 

                storedProducts.forEach((product) => {
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    
                    const imageSrc = product.image || `https://picsum.photos/seed/${product.id}/300/200`;

                    card.innerHTML = `
                        <img src="${imageSrc}" alt="${product.name}" class="product-image">
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <span class="product-category">Category: ${product.category || 'N/A'}</span>
                            <span class="product-price">RM ${product.price}</span>
                        </div>
                        <div class="button-group">
                            <button class="add-btn" onclick="addToCart('${product.name}', ${product.price})">
                                Add to Cart
                            </button>
                            <button class="details-btn" onclick="viewDetails(${product.id})">
                                Details
                            </button>
                        </div>
                    `;
                    display.appendChild(card);
                });
            }

            function viewDetails(id){
                window.location.href = `product-details.html?id=${id}`;
            }

            function addToCart(name, price){
                let cart = JSON.parse(localStorage.getItem('myCart')) || [];
                cart.push({ name: name, price: price });
                localStorage.setItem('myCart', JSON.stringify(cart));
                alert(name + " has been added to your cart!");
            }

            window.addEventListener('storage', (e) => {
                if (e.key === 'allProducts') displayProducts();
            });

            displayProducts();
        </script>
    </body>
</html>